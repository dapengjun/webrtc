<!DOCTYPE html>
<html>
  <head>
    <title>getUserMedia</title>
    <script>
    	function load()
    	{
	        navigator.getUserMedia || (navigator.getUserMedia = navigator.mozGetUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia);

			if (!navigator.getUserMedia) {
			    return;
			}

			var btn = document.getElementById('run');
			btn.onclick = startWebcam;
    	}

		function startWebcam(e) {
			alert(0);
		    navigator.getUserMedia({
		        'video': true,
		        'audio': true
		    }, onSuccess, onError);
			alert(1);
		    function onSuccess(stream) {
		    	alert(stream);
		        var video = document.getElementById('webcam');

		        if (window.URL) {
		            video.src = window.URL.createObjectURL(stream);
		        } else {
		            video.src = stream;
		        }

		        video.autoplay = true;
		        //or video.play();
		    }

		    function onError() {}
		}
    </script>
  </head>
  <body onload='load()'>
	<button id="run">start</button><Br/>
	<video id="webcam"></video>
  </body>
</html>
